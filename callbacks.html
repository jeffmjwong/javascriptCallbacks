<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Callbacks & JSON</title>

  </head>
  <body>

    <p>Empty HTML doc :) Some JS is running. Save me to your machine.</p>
    <button id="button">Generate New Random User!</button>
    <p id="main-paragraph"></p>

    <script>
    function parseRandomUser(json) {
      const paragraph = document.getElementById('main-paragraph');
      json = JSON.parse(json);
      const randomUser = json.results[0];
      let str = '';
      str += `First name: ${randomUser.name.first}<br>`;
      str += `Last name: ${randomUser.name.last}<br>`;
      str += `Email: ${randomUser.email}`;
      paragraph.innerHTML = str;
    }

    getRandomUser = () => {
      // This function uses AJAX to hit the random user API.
      // More info: https://randomuser.me

      var request = new XMLHttpRequest();
      request.open('GET', 'https://randomuser.me/api/', true);
      request.onload = function () {
        /* You'll start here */
        console.log(request);
        parseRandomUser(request.response);
      };

      request.send();
    }

    const button = document.getElementById('button');
    button.addEventListener('click', getRandomUser);
    </script>
  </body>
</html>
